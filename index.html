<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script><script src="https://code.jquery.com/jquery-3.7.1.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/jquery-mask-plugin@1.14.16/dist/jquery.mask.min.js" crossorigin="anonymous"></script><script defer="defer" src="app.js"></script></head><body><div class="pt-5 pb-5"><h3 id="title" class="container title d-flex justify-content-center"></h3><form id="mainForm" class="container pt-3 pb-3" method="post"></form></div><script defer="defer">var tabsMapping = JSON.parse('{"estoque": {"components": [{"ID": "Produto", "options": ["Argamassa Megamassa AC1", "Argamassa Megamassa AC2", "Argamassa Megamassa AC3"], "type": "selector"}, {"ID": "Quantidade", "options": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20"], "type": "selector"}, {"ID": "Lote", "type": "number"}, {"ID": "Reprocessado", "label": "Reprocessado (em sacas)", "type": "number"}, {"ID": "Data", "type": "date"}, {"ID": "Confirmado", "options": ["", "Sim", "Não"], "type": "selector"}, {"ID": "Obs", "label": "Observação", "type": "text"}], "title": "Estoque", "titleWpp": "Informações de estoque"}, "vendas": {"components": [{"ID": "Cliente", "type": "text"}, {"ID": "Cidade", "options": ["SOURE", "SALVATERRA", "CACHOEIRA", "OUTRO"], "type": "selector"}, {"ID": "O.V.", "type": "number"}, {"ID": "Produto", "options": ["Argamassa Megamassa AC1", "Argamassa Megamassa AC2", "Argamassa Megamassa AC3"], "type": "selector"}, {"extraClasses": "money", "ID": "Valor", "label": "Valor Unitário", "type": "text"}, {"ID": "Quantidade", "type": "number"}, {"ID": "Data", "type": "date"}, {"ID": "Validação", "options": ["", "SIM", "NÃO"], "type": "selector"}], "title": "Vendas", "titleWpp": "Informações de vendas"}}');
      var params = new URLSearchParams(location.search);
      var form = tabsMapping[params.get("form")] || {};

      document.addEventListener('dynamicForm:loaded', function(){
        var event = new CustomEvent("dynamicForm:create", {detail: {
          form: form,
          titleSelector: "#title",
          formSelector: "#mainForm",
          callback: function (mainForm, form) {
            mainForm.addEventListener("submit", function(e) {
              var params = new URLSearchParams(location.search);
              e.preventDefault();
              var phoneNumber = params.get("phone") || "123456789";
              var url = `https://wa.me/${phoneNumber}?text=${form.titleWpp || ""}%0A%0A`;
              var text = "";
              for (var index = 0; index < e.target.length; index++) {
                var element = e.target[index];
                if (element.value) {
                  if (text.length) {
                    text += `%0A`
                  }
                  text += `${element.getAttribute("data-name")}:${element.value}`
                }
              }

              if (text) {
                // window.open(url + text, "_blank").focus();
                window.location = url + text;
              }
            });
          }
        }});

        document.dispatchEvent(event);
      });</script></body></html>